const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/YunGallery.D_UbLB2l.js","assets/framework.G3zEtWHG.js","assets/app.Bj__erl2.js","assets/chunks/vue-router.BsZKfFkz.js","assets/chunks/dayjs.BqMCNpOC.js","assets/chunks/@vueuse/motion.IdxHhwG2.js","assets/chunks/vue-i18n.B04OBaBb.js","assets/chunks/pinia.B9bXv_6k.js","assets/chunks/nprogress.CZUfyql0.js","assets/app.B4_sCyoA.css","assets/YunPageHeader.vue_vue_type_script_setup_true_lang.i3rmKFY_.js"])))=>i.map(i=>d[i]);
import{p as x,H as k,I as g,J as i,d as C,k as b,O as w,M as a,Z as R,$ as S,a0 as B,Q as O,C as _,a1 as T,a2 as G,K as v,V as Y,S as F,u as o,F as L,_ as M}from"./framework.G3zEtWHG.js";import{i as j,a as I,b as U,d as H,e as N,p as z,q as J,_ as W,g as q,h as Q}from"./app.Bj__erl2.js";import"./chunks/dayjs.BqMCNpOC.js";import{_ as Z}from"./YunPageHeader.vue_vue_type_script_setup_true_lang.i3rmKFY_.js";import{u as X,a as ee}from"./chunks/vue-router.BsZKfFkz.js";import{u as te}from"./chunks/vue-i18n.B04OBaBb.js";function oe(s){const t=new TextEncoder;return window.crypto.subtle.importKey("raw",t.encode(s),"PBKDF2",!1,["deriveBits","deriveKey"])}function ne(s,t){return window.crypto.subtle.deriveKey({name:"PBKDF2",salt:t,iterations:1e5,hash:"SHA-256"},s,{name:"AES-CBC",length:256},!0,["encrypt","decrypt"])}function se(){const s=j(),{encrypt:t}=s.value,l=Uint8Array.from(Object.values(t.iv)),e=Uint8Array.from(Object.values(t.salt));return{decrypt:async(r,u)=>{if(!r)return;const y=await oe(r),m=await ne(y,e),f=Uint8Array.from(u,c=>c.charCodeAt(0)),p=await window.crypto.subtle.decrypt({name:"AES-CBC",iv:l},m,f);return new TextDecoder().decode(p)}}}const re=x({__name:"YunGallery",props:{photos:{}},setup(s){return(t,l)=>{const e=k("VAGallery");return i(),g(e,{photos:t.photos},null,8,["photos"])}}}),ae={key:0,"w-full":"","pt-14":"","pb-10":""},le={class:"decrypt-password-container w-full sm:w-1/2","flex-center":"","m-auto":"",relative:""},ce={key:1},ie=x({__name:"ValaxyGalleryDecrypt",props:{encryptedPhotos:{}},setup(s,{expose:t}){const l=s,e=C(""),r=C(""),u=C(!1),{decrypt:y}=se();async function m(){const c=l.encryptedPhotos;if(c)try{const n=await y(e.value,c);r.value=n||""}catch(n){u.value=!0,console.error(n)}}function f(){r.value="",e.value=""}const p=b(()=>JSON.parse(r.value||"[]")||[]);return t({photos:p}),(c,n)=>{const h=re;return i(),w("div",null,[r.value?(i(),w("div",ce,[_(h,{photos:p.value},null,8,["photos"]),a("div",{"w-full":"","text-center":"","mt-8":""},[a("button",{"m-auto":"",class:"btn","font-bold":"",onClick:f}," Encrypt Again ")])])):(i(),w("div",ae,[a("div",le,[R(a("input",{"onUpdate:modelValue":n[0]||(n[0]=d=>e.value=d),"w-full":"",border:"","pl-5":"","pr-11":"","py-3":"",rounded:"","hover:shadow":"",transition:"",type:"password",placeholder:"Enter password",class:O(u.value&&"border-red"),onInput:n[1]||(n[1]=d=>u.value=!1),onKeyup:B(m,["enter"])},null,34),[[S,e.value]]),a("div",{"cursor-pointer":"",absolute:"","text-2xl":"","i-ri-arrow-right-circle-line":"","right-3":"","text-gray":"","hover:text-black":"",onClick:m})])]))])}}}),ue={text:"center",class:"yun-text-light",p:"2"},pe={class:"page-action",text:"center"},de=["title"],ye=x({__name:"gallery",setup(s){const t=X(),{t:l}=te(),e=I(),r=U(e);H([N({"@type":"CollectionPage"})]);const u=ee(),y=b(()=>u.meta.frontmatter.photos||[]),f=z().value.addons["valaxy-addon-lightgallery"]?T(()=>M(()=>import("./YunGallery.D_UbLB2l.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10]))):()=>null,p=J(),c=G("galleryRef"),n=b(()=>{var h;return y.value.length||((h=c.value)==null?void 0:h.photos.length)});return(h,d)=>{const A=W,P=Z,D=ie,V=k("RouterView"),$=q,E=Q;return i(),w(L,null,[_($,null,{default:v(()=>[_(A),_(V,null,{default:v(({Component:K})=>[(i(),g(Y(K),null,{"main-header":v(()=>[_(P,{title:o(r)||o(l)("title.gallery"),icon:o(e).icon||"i-ri-gallery-line",color:o(e).color,"page-title-class":o(e).pageTitleClass},null,8,["title","icon","color","page-title-class"])]),default:v(()=>[a("div",ue,F(o(l)("counter.photos",n.value||0)),1),a("div",pe,[a("a",{class:"yun-icon-btn",title:o(l)("accessibility.back"),onClick:d[0]||(d[0]=()=>o(t).back())},[...d[1]||(d[1]=[a("div",{"i-ri-arrow-go-back-line":""},null,-1)])],8,de)]),o(p)?(i(),g(D,{key:0,ref_key:"galleryRef",ref:c,"encrypted-photos":o(p)},null,8,["encrypted-photos"])):(i(),g(o(f),{key:1,photos:y.value},null,8,["photos"]))]),_:1}))]),_:1})]),_:1}),_(E)],64)}}}),we=Object.freeze(Object.defineProperty({__proto__:null,default:ye},Symbol.toStringTag,{value:"Module"}));export{re as _,we as g};
